#! /bin/sh

rm -f out.gif

ffmpeg -i video.mp4 -ss 0:00:00.0 -t 0:00:10.00 -vf "crop=256:192, eq=brightness=1.2:contrast=5.0" _0.mp4
ffmpeg -i _0.mp4 -i interlace2.png -filter_complex "overlay" _0.gif
ffmpeg -i _0.gif -vf "reverse" _1.gif

# echo `seq -f "\"#%g\" " 0 12 160`
gifsicle -U -k 2 _0.gif "#0" "#10" "#20" "#30" "#40" "#50" "#60" "#70" "#80" "#90" "#100" "#110" "#120" "#130" "#140" "#150" "#160" -o _01.gif
gifsicle -U -k 2 _1.gif "#0" "#10" "#20" "#30" "#40" "#50" "#60" "#70" "#80" "#90" "#100" "#110" "#120" "#130" "#140" "#150" "#160" -o _11.gif
#gifsicle -U -k 2 _0.gif "#0" "#8" "#16" "#24" "#32" "#40" "#48" "#56" "#64" "#72" "#80" "#88" "#96" "#104" "#112" "#120" "#128" "#136" "#144" "#152" "#160" -o _01.gif#gifsicle -U -k 2 _1.gif "#0" "#8" "#16" "#24" "#32" "#40" "#48" "#56" "#64" "#72" "#80" "#88" "#96" "#104" "#112" "#120" "#128" "#136" "#144" "#152" "#160" -o _01.gif
#gifsicle -U -k 2 _1.gif "#0" "#8" "#16" "#24" "#32" "#40" "#48" "#56" "#64" "#72" "#80" "#88" "#96" "#104" "#112" "#120" "#128" "#136" "#144" "#152" "#160" -o _01.gif#gifsicle -U -k 2 _1.gif "#0" "#8" "#16" "#24" "#32" "#40" "#48" "#56" "#64" "#72" "#80" "#88" "#96" "#104" "#112" "#120" "#128" "#136" "#144" "#152" "#160" -o _11.gif
#gifsicle -U -k 2 _0.gif "#0" "#4" "#8" "#12" "#16" "#20" "#24" "#28" "#32" "#36" "#40" "#44" "#48" "#52" "#56" "#60" "#64" "#68" "#72" "#76" "#80" "#84" "#88" "#92" "#96" "#100" -o _01.gif
#gifsicle -U -k 2 _1.gif "#0" "#4" "#8" "#12" "#16" "#20" "#24" "#28" "#32" "#36" "#40" "#44" "#48" "#52" "#56" "#60" "#64" "#68" "#72" "#76" "#80" "#84" "#88" "#92" "#96" "#100" -o _11.gif

gifsicle --merge _01.gif _11.gif  -o out.gif

rm -f _0.mp4
rm -f _0.gif
rm -f _1.gif
rm -f _01.gif
rm -f _11.gif
